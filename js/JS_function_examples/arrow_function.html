<!-- Based on examples at https://www.w3schools.com/js/js_arrow_function.asp-->
<!DOCTYPE html>
<html>
    <head>
        <style>
            .thistyle{
                font-weight: bold;
                color:brown;
            }
            .stress{
                font-style: italic;
            }
            body{
                background-color: cornflowerblue;
            }
        </style>
    </head>
<body>

    <h1>Using "this" in regular vs. arrow functions</h1>

    <p>Regular functions: <span class="thistyle">this</span> represents 
        the <span class="stress">object that called</span> 
        the function (window/document/button...).</p>

    <p>Arrow functions: <span class="thistyle">this</span> always represents 
        the <span class="stress">object that defined the 
        arrow function</span>.

    <p>This example demonstrate that in a regular function, the 
        "this" keyword represents different objects depending on 
        how the function was called.</p>

    <p>Click the button to execute the "hello" function again, 
        and you will see that this time "this" represents the button object.</p>

    <p><button id="btn">Click Me!</button></p>

    <label for="demo">Regular function:</label><p id="demo"></p>
    <label for="demo_anom">Regular but anonymous function:</label><p id="demo_anom"></p>
    <label for="demo_arrow">Arrow function:</label><p id="demo_arrow"></p>

    <script>
        // Regular function:
        function hello() {
            document.getElementById("demo").innerHTML += this;
        }

        // Regular anonymous function:
        var hello_anonym = function(){
            document.getElementById("demo_anom").innerHTML += this;
        };

        // Arrow function:
        var hello_arrow = ()=>{
            document.getElementById("demo_arrow").innerHTML += this;
        }

        //The window object calls the function while loading the page:
        window.addEventListener("load", function(){
            hello(),
            hello_anonym(),
            hello_arrow()
        });

        //A button object calls the function when user clicks the button:
        // Here in all 3 cases 'this' returns the Window. Seems somehow
        // the anonymous function call here makes a difference. Hmm...
        /*document.getElementById("btn").addEventListener("click", function(){
            hello(),
            hello_anonym(),
            hello_arrow()
        });*/
        
        document.getElementById("btn").addEventListener("click", hello);
        document.getElementById("btn").addEventListener("click", hello_anonym);
        document.getElementById("btn").addEventListener("click", hello_arrow);
    </script>
</body>
</html>