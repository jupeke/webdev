<!DOCTYPE html>
<html>
<head>

<style>
  body {font-size:200%;}
  input {font-size:100%;}
  button {font-size: 100%}
</style>

<script>
// NOTE: some features in the code here are from ECMAScript 6 (ES6)
//(the newest JavaScript standard from 6/2015) that only works
// in browsers supporting it (practically the most modern
// browsers do but no version of IE, for instance).
// Examples of the new notation: class, constructor, const, let

// Global variables and constants:
var main = "";  // Instance of MainControl class

// Images that make the monster look like swallowing:
var imageSources =
  [
    "images/snowEaterSwallow1.png",
    "images/snowEaterSwallow2.png",
    "images/snowEaterSwallow3.png",
    "images/snowEaterSwallow4.png",
    "images/snowEaterSwallow5.png",
    "images/snowEaterSwallow6.png",
    "images/snowEaterSwallow5.png",
    "images/snowEaterSwallow4.png",
    "images/snowEaterSwallow3.png",
    "images/snowEaterSwallow2.png",
    "images/snowEaterSwallow1.png"
  ];


// Classes:

// Image class (ES6):
class Anima {
  var timer;
  constructor(imageSrc){
    this.htmlElem = document.getElementById('animation');
    this.timer = "";
  }

  // Shows a series of images that make the monster swallow:
  swallow(){
    var index = 0;
    var src = "";

    // This one works with 'this' preserving the local reference!
    // Note so called "arrow function".
    timer = setInterval(()=>{
      if(index < imageSources.length){
        src = imageSources[index];
        this.htmlElem.src = src;

        index++;
      } else{
        //clearInterval(timer);
        index = 0;
      }
    }, 60);
  }
  stop(){
    clearInterval(this.timer);
  }
}

var anima;
function show(){
  anima = new Anima();
  anima.swallow();
}

</script>

<body>

<h1>Input and output</h1>
<p> Write something in the text field and click the button.</p>

<button onclick="show()">Show animation!</button>
<button onclick="anima.stop()">Stop</button>

<p> Output:</p>

<img src="images/snowEaterSwallow1.png" id="animation"/>

</body>

</html>
